{% extends "layouts/base.html" %}

{% block title %} {{title}} {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

<style>
    .hide {
        display: none;
    }

    .result {
        position: absolute;
        width: 100%;
        max-width: 920px;
        cursor: pointer;
        overflow-y: auto;
        max-height: 400px;
        box-sizing: border-box;
        z-index: 1001;
    }
    .btn-file {
        position: relative;
        overflow: hidden;
    }

    .btn-file input[type=file] {
        position: absolute;
        top: 0;
        right: 0;
        min-width: 100%;
        min-height: 100%;
        font-size: 100px;
        text-align: right;
        filter: alpha(opacity=0);
        opacity: 0;
        outline: none;
        background: white;
        cursor: inherit;
        display: block;
    }

    #img-upload {
        border: 1.5px solid black;
        height: 200px;
        width: 400px;
        border-style: dotted;
    }

    .alert {
        padding: 20px 40px;
        min-width: 320px;
        position: fixed;
        right: 0px;
        top: 100px;
        overflow: hidden;
        border-radius: 4px;
        opacity: 0;
        pointer-events: none;
    }

    .alert.showAlert {
        opacity: 1;
        pointer-events: auto;
    }

    .alert.show {
        animation: show_slide 1s ease forwards;

    }

    @keyframes show_slide {
        0% {
            transform: translateX(100%);
        }

        40% {
            transform: translateX(-10%);
        }

        80% {
            transform: translateX(0%);
        }

        100% {
            transform: translateX(-10%);
        }
    }

    .alert.hide {
        animation: hide_slide 1s ease forwards;

    }

    @keyframes hide_slide {
        0% {
            transform: translateX(100%);
        }

        40% {
            transform: translateX(-10%);
        }

        80% {
            transform: translateX(0%);
        }

        100% {
            transform: translateX(-10%);
        }
    }

    .alert .fa-exclamation-circle {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: #141414;
        font-size: 30px;
    }

    .alert .msg {
        padding: 0 20px;
        font-size: 18px;
        color: #855702;
    }

    .alert .close-btn {
        position: absolute;
        right: 0px;
        top: 50%;
        transform: translateY(-50%);
        padding: 20px 10px;
        cursor: pointer;
    }

    .close-btn .fa-times {
        color: #ce8500;
        font-size: 22px;
        line-height: 40px;
    }
</style>

{% endblock stylesheets %}

{% block content %}
<div class="section mt-5 text-white">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 text-center">
                <h1 class="display-3 text-dark">Criar Evento</h1>
            </div>
        </div>
    </div>
</div>

<section class="section-header overflow-hidden pb-9 pb-lg-12 bg-gray-200 text-white">
    <div class="container">
        {% from "_formhelper.html" import render_field %}
        <form id="form_main" method="POST">
            {{ form_ticket.csrf_token }}
            <div class="card card-body bg-white border-light mb-4 shadow">
                <h2 class="h5 mb-4 text-dark">1. Informações básicas</h2>
                <label class="mb-4 text-secondary">Adicione também uma imagem de divulgação com as principais
                    informações do evento.</label>

                <div class="form-group">
                    <div class="col-md-12 mb-3">
                        <div class="mb-3 ">
                            <label class="text-dark" for="first_name">Nome do evento <strong
                                    class="text-danger">*</strong></label>
                            {{render_field(form.name,class="form-control")}}                            
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6 mb-3">
                        <p class="text-dark">Upload Image</p>
                        <div class="input-group mb-3">
                            <span class="input-group-btn">
                                <span class="btn btn-primary btn-file">
                                    Browse…
                                    <input type="file" id="imgInp">
                                    <span class="ml-1">
                                        <span class="far fa-save"></span>
                                    </span>
                                </span>
                            </span>
                            <input name="image_1" type="text" class="custom-file-input" readonly hidden>
                            
                        </div>
                        <img class="cardcard-img rounded" id='img-upload' />
                    </div>
                </div>
            </div>
            <div class="card card-body bg-white border-light mb-4 shadow">
                <h2 class="h5 mb-4 text-dark">2. Onde seu evento vai ocorrer?</h2>
                <div class="row">
                    <div class="col-12">
                        <!-- Tab Nav -->
                        <div class="nav-wrapper position-relative mb-2">
                            <ul class="nav nav-pills nav-fill flex-column flex-md-row" id="tabs-text" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link mb-sm-3 mb-md-0 text-dark active" id="tabs-text-1-tab"
                                        data-toggle="tab" href="#tabs-text-1" role="tab" aria-controls="tabs-text-1"
                                        aria-selected="true">Novo endereço</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link mb-sm-3 mb-md-0 text-dark" id="tabs-text-3-tab" data-toggle="tab"
                                        href="#tabs-text-3" role="tab" aria-controls="tabs-text-3"
                                        aria-selected="false">Evento online</a>
                                </li>
                            </ul>
                        </div>
                        <!-- End of Tab Nav -->
                        <!-- Tab Content -->
                        <div class="card">
                            <div class="card-body p-0">
                                <div class="tab-content" id="tabcontent1">
                                    <div class="tab-pane fade show active" id="tabs-text-1" role="tabpanel"
                                        aria-labelledby="tabs-text-1-tab">
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">Local</label>
                                                    {{render_field(form.local_name,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">Endereço <strong
                                                            class="text-danger">*</strong></label>
                                                    {{render_field(form.address,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">CEP <strong
                                                            class="text-danger">*</strong></label>
                                                    {{render_field(form.zipcode,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">AV./Rua <strong
                                                            class="text-danger">*</strong></label>
                                                    {{render_field(form.Street,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="row ">
                                                    <div class="col-12 col-md-6">
                                                        <label class="text-dark" for="first_name">Número <strong
                                                                class="text-danger">*</strong></label>
                                                        {{render_field(form.number,class="form-control")}}
                                                    </div>
                                                    <div class="col-12 col-md-6">
                                                        <label class="text-dark" for="first_name">Complemento</label>
                                                        {{render_field(form.complement,class="form-control")}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">Bairro <strong
                                                            class="text-danger">*</strong></label>
                                                    {{render_field(form.district,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">Cidade <strong
                                                            class="text-danger">*</strong></label>
                                                    {{render_field(form.city,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 mb-3">
                                                <div class="mb-3 ">
                                                    <label class="text-dark" for="first_name">Estado <strong
                                                            class="text-danger">*</strong></label>
                                                    {{render_field(form.state,class="form-control")}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tabs-text-3" role="tabpanel"
                                        aria-labelledby="tabs-text-3-tab">
                                        <label for="category" class="text-dark">Selecione a plataforma</label>
                                        <select name="plataforma" class="custom-select my-1 mr-sm-2"
                                            id="inlineFormCustomSelectPref">
                                            <option selected="selected">Choose...</option>
                                            {% for p in plataforms %}
                                            <option value="{{p.id}}">{{p.name}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End of Tab Content -->
                    </div>
                </div>


            </div>

            <div class="card card-body bg-white border-light mb-4 shadow">
                <h2 class="h5 mb-4 text-dark">3. Quando vai ocorrer</h2>
                <div class="form-group">
                    <div class="row ">
                        <div class="col-12 col-md-8 ">
                            <div class="input-daterange datepicker row align-items-center">
                                <div class="col">
                                    <div class="form-group">
                                        <label class="h6 text-dark" for="exampleInputDate1">Data
                                            de inicio das vendas</label>
                                        <div class="input-group mb-4">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <span class="far fa-calendar-alt"></span>
                                                </span>
                                            </div>
                                            {{render_field(form.start_date,class="form-control
                                            datepicker",id="exampleInputDate1")}}
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-group">
                                        <label class="h6 text-dark" for="exampleInputDate1">Data
                                            de Término das vendas</label>
                                        <div class="input-group mb-4">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <span class="far fa-calendar-alt"></span>
                                                </span>
                                            </div>
                                            {{render_field(form.end_date,class="form-control
                                            datepicker",id="exampleInputDate2")}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-4">
                            <div class="form-group ">
                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                    de inicio</label>
                                <div class="input-group mb-4">
                                    {{render_field(form.start_time,class="form-control",type="time")}}
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-4">
                            <div class="form-group ">
                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                    de Término</label>
                                <div class="input-group mb-4">
                                    {{render_field(form.end_time,class="form-control",type="time")}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card  bg-white border-light mb-4 shadow">
                <div class="form-group">
                    <div class="col-lg-12 col-sm-6">
                        <h1 class="h5 text-dark">4. Descrição do evento</h1>
                        <label class="mb-4 text-secondary">Conte todos os detalhes do seu evento, como a programação e
                            os diferenciais da sua produção!</label>
                        {{render_field(form.description,id="editor",style="height: 340px;")}}
                    </div>
                </div>
            </div>

            <div class="card card-body bg-white border-light mb-4 align-center  shadow">
                <h2 class="h5 mb-4 text-dark">5. Categoria</h2>
                <div class="form-group">
                    <div class="col-md-12 mb-3">
                        <label for="category" class="text-dark">Adicione a Categoria</label>
                        <select name="categoria" class="custom-select my-1 mr-sm-2" id="inlineFormCustomSelectPref">
                            <option  selected="selected">Choose...</option>
                            {% for cat in category %}
                            <option value="{{cat.id}}">{{cat.name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <input id="submit_button" type="submit" hidden></input>
        </form>
        <div class="card card-body bg-white border-light mb-4 align-center  shadow">
            <h2 class="h5 mb-4 text-dark">6. Ingressos</h2>
            <div class="form-group ">
                <p class="text-center text-dark">Que tipo de ingresso você deseja criar?</p>
                <div class="col-md-12 mb-3 d-flex justify-content-center">
                    <div class="d-flex justify-content-center">
                        <div class="col-sm mb-4">
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#modal-pagos">Pagos</button>
                        </div>
                        <div class="col-sm mb-4">
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#modal-gratis">Gratis</button>
                        </div>

                        <div class="col-sm mb-4">
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#modal-doacao">Doação</button>

                        </div>
                    </div>
                </div>
                {% if ticket%}
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col">Selecionar</th>
                                <th scope="col">Nome</th>
                                <th scope="col">Tipo</th>
                                <th scope="col">Vendidos / A vender</th>
                                <th scope="col">Contribuição</th>
                                <th scope="col">Taxa</th>
                                <th scope="col">Preço Final</th>
                                <th scope="col">Ação</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for tic in ticket %}
                            <tr>
                                <td>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="{{tic.id}}"
                                            id="flexCheckChecked{{tic.id}}">
                                        <label class="form-check-label" for="flexCheckChecked{{tic.id}}"></label>
                                    </div>
                                </td>
                                <td>{{tic.name}}</td>
                                <td>{{tic.type}}</td>
                                <td>
                                    <div class="row bg-gray-300">
                                        <div class="col-md-8">
                                            <p class="text-left">{{tic.sold}}</p>
                                        </div>
                                        <div class="col-md-4 float-left">
                                            <p class="text-sm-right">{{tic.amount}}</p>
                                        </div>

                                    </div>
                                </td>
                                <td>
                                    {% if tic.type == 'Doação' %}
                                    {{tic.name}}
                                    {% else %}
                                    {{tic.price}}
                                    {% endif %}
                                </td>
                                <td>{{tic.rate}} </td>
                                <td>{{tic.total}}</td>
                                <td>
                                    <div class="d-flex">
                                        <i class="fas fa-edit mr-3" data-toggle="modal" data-placement="top"
                                            data-target="#modal-edit-{{tic.id}}" title="Edit item"></i>
                                        <i class="fas fa-trash text-danger mr-2" data-toggle="modal"
                                            data-placement="top" data-target="#modal-delete-{{tic.id}}"
                                            title="Delete item"></i>
                                    </div>
                                </td>
                            </tr>
                            <div class="modal fade" id="modal-delete-{{tic.id}}" tabindex="-1" role="dialog"
                                aria-labelledby="modal-form" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title text-dark" id="modal-delete-">
                                                Deletar - {{tic.name}}
                                            </h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <span class="text text-dark">Deseja realmente deletar o ingresso?</span>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-primary" data-dismiss="modal">
                                                Cancelar
                                            </button>
                                            <form id="delete_ticket{{tic.id}}" method="POST">
                                                <button type="submit" onmousedown="delete_ticket({{tic.id}})"
                                                    class="btn btn-danger">
                                                    Deletar
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% if tic.type == 'Pagos' %}
                            <div class="modal fade" id="modal-edit-{{tic.id}}" tabindex="-1" role="dialog"
                                aria-labelledby="modal-edit-{{tic.id}}" aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h6 class="modal-title text-dark">Alterar ingresso pago {{tic.id}}</h6>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <form id="edit-form-pagos{{tic.id}}" method="POST">
                                            {{ form_ticket.csrf_token }}
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <input type="text" name="type" value="pagos" hidden>
                                                    <div class="row mb-4 mb-lg-5">
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Nome
                                                                    do ingresso</label>
                                                                {{render_field(form_ticket.name,class="form-control",value=tic.name)}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Quantidade
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.amount,class="form-control",onkeypress="validate(event)",value=tic.amount,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-8 col-md-3">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Preço</label>
                                                                {{render_field(form_ticket.price,class="form-control",type="number",onkeypress="validate(event)",value=tic.price,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-4 col-md-1">
                                                            <div class="form-group">
                                                                <p class="h6 text-dark" for="exampleInputDate1">
                                                                    Preço </p>
                                                                <label class="text-success" for="">R$ 0,00</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="row ">
                                                        <div class="col-lg-4 col-sm-6">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Data
                                                                    de inicio das vendas</label>
                                                                <div class="input-group mb-4">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <span class="far fa-calendar-alt"></span>
                                                                        </span>
                                                                    </div>
                                                                    {{render_field(form_ticket.start_date_sale,class="form-control
                                                                    datepicker",id="exampleInputDate1",value=tic.start_date_sale.strftime('%d/%m/%Y'))}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-6">
                                                            <div class="form-group ">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                                    de inicio</label>
                                                                <div class="input-group mb-4">
                                                                    {{render_field(form_ticket.start_time_sale,class="form-control",type="time",value=tic.start_time_sale)}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-sm-6">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Data
                                                                    de Término das vendas</label>
                                                                <div class="input-group mb-4">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <span class="far fa-calendar-alt"></span>
                                                                        </span>
                                                                    </div>
                                                                    {{render_field(form_ticket.end_date_sale,class="form-control
                                                                    datepicker",id="exampleInputDate1",value=tic.end_date_sale.strftime('%d/%m/%Y'))}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-6">
                                                            <div class="form-group ">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                                    de Término</label>
                                                                <div class="input-group mb-4">
                                                                    {{render_field(form_ticket.end_time_sale,class="form-control",type="time",value=tic.end_time_sale)}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="row ">
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Mínima
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.min_quantity,class="form-control",type="number",onkeypress="validate(event)",value=tic.min_quantity,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Maxima
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.max_quantity,class="form-control",type="number",onkeypress="validate(event)",value=tic.max_quantity,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Descrição do
                                                                    ingresso</label>
                                                                {{render_field(form_ticket.description,class="form-control",default='This
                                                                is default text')}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="submit" onmousedown="post_edit({{tic.id}})"
                                                    class="btn btn-sm btn-secondary">Criar
                                                    ingresso</button>
                                                <button type="button" id="button"
                                                    class="btn btn-link text-danger ml-auto"
                                                    data-dismiss="modal">Cancelar</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% elif tic.type == 'Gratis' %}
                            <div class="modal fade" id="modal-edit-{{tic.id}}" tabindex="-1" role="dialog"
                                aria-labelledby="modal-edit-{{tic.id}}" aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h6 class="modal-title text-dark">Alterar ingresso gratis</h6>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <form id="edit-form-gatis{{tic.id}}" method="POST">
                                            {{ form_ticket.csrf_token }}
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <div class="row mb-4 mb-lg-5">
                                                        <input type="text" name="type" value="gratis" hidden>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Nome
                                                                    do ingresso</label>
                                                                {{render_field(form_ticket.name,class="form-control",value=tic.name)}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Quantidade
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.amount,class="form-control",onkeypress="validate(event)",value=tic.amount,min='0')}}
                                                            </div>
                                                        </div>

                                                        <div class="col-4 col-md-1">
                                                            <div class="form-group">
                                                                <p class="h6 text-dark" for="exampleInputDate1">Preço
                                                                </p>
                                                                <label class="text-success" for="">Gratis</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row ">
                                                        <div class="col-lg-4 col-sm-6">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Data
                                                                    de inicio das vendas</label>
                                                                <div class="input-group mb-4">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <span class="far fa-calendar-alt"></span>
                                                                        </span>
                                                                    </div>
                                                                    {{render_field(form_ticket.start_date_sale,class="form-control
                                                                    datepicker",id="exampleInputDate1",value=tic.start_date_sale.strftime('%d/%m/%Y'))}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-6">
                                                            <div class="form-group ">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                                    de inicio</label>
                                                                <div class="input-group mb-4">
                                                                    {{render_field(form_ticket.start_time_sale,class="form-control",type="time",value=tic.start_time_sale)}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-sm-6">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Data
                                                                    de Término das vendas</label>
                                                                <div class="input-group mb-4">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <span class="far fa-calendar-alt"></span>
                                                                        </span>
                                                                    </div>
                                                                    {{render_field(form_ticket.end_date_sale,class="form-control
                                                                    datepicker",id="exampleInputDate1",value=tic.end_date_sale.strftime('%d/%m/%Y'))}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-6">
                                                            <div class="form-group ">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                                    de Término</label>
                                                                <div class="input-group mb-4">
                                                                    {{render_field(form_ticket.end_time_sale,class="form-control",type="time",value=tic.end_time_sale)}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="row ">
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Mínima
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.min_quantity,class="form-control",onkeypress="validate(event)",value=tic.min_quantity,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Maxima
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.max_quantity,class="form-control",onkeypress="validate(event)",value=tic.max_quantity,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Descrição do
                                                                    ingresso</label>
                                                                {{render_field(form_ticket.description,class="form-control",default='This
                                                                is default text')}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="submit" onmousedown="post_edit_gatis({{tic.id}})"
                                                    class="btn btn-sm btn-secondary">Alterar
                                                    ingresso</button>
                                                <button type="button" class="btn btn-link text-danger ml-auto"
                                                    data-dismiss="modal">Cancelar</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% elif tic.type == 'Doação' %}
                            <div class="modal fade" id="modal-edit-{{tic.id}}" tabindex="-1" role="dialog"
                                aria-labelledby="modal-edit-{{tic.id}}" aria-hidden="true">
                                <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h6 class="modal-title text-dark">Alterar ingresso de doação</h6>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <form method="POST" id="edit-form-doacao{{tic.id}}">
                                            {{ form_ticket.csrf_token }}
                                            <input type="text" name="type" value="doação" hidden>
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <div class="row mb-4 mb-lg-5">
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Nome
                                                                    do ingresso</label>
                                                                {{render_field(form_ticket.name,class="form-control",value=tic.name)}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Quantidade
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.amount,class="form-control",onkeypress="validate(event)",value=tic.amount,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark">Adicione o item da
                                                                    doação</label>
                                                                <select name="donation" class="custom-select"
                                                                    id="inlineFormCustomSelectPref">
                                                                    <option selected="selected">aaa</option>
                                                                    {% for donat in donation %}
                                                                    <option value="{{donat.id}}">{{donat.name}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row ">
                                                        <div class="col-lg-4 col-sm-6">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Data
                                                                    de inicio das vendas</label>
                                                                <div class="input-group mb-4">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <span class="far fa-calendar-alt"></span>
                                                                        </span>
                                                                    </div>
                                                                    {{render_field(form_ticket.start_date_sale,class="form-control
                                                                    datepicker",id="exampleInputDate1",value=tic.start_date_sale.strftime('%d/%m/%Y'))}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-6">
                                                            <div class="form-group ">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                                    de inicio</label>
                                                                <div class="input-group mb-4">
                                                                    {{render_field(form_ticket.start_time_sale,class="form-control",type="time",value=tic.start_time_sale)}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-4 col-sm-6">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Data
                                                                    de Término das vendas</label>
                                                                <div class="input-group mb-4">
                                                                    <div class="input-group-prepend">
                                                                        <span class="input-group-text">
                                                                            <span class="far fa-calendar-alt"></span>
                                                                        </span>
                                                                    </div>
                                                                    {{render_field(form_ticket.end_date_sale,class="form-control
                                                                    datepicker",id="exampleInputDate1",value=tic.end_date_sale.strftime('%d/%m/%Y'))}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-6">
                                                            <div class="form-group ">
                                                                <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                                    de Término</label>
                                                                <div class="input-group mb-4">
                                                                    {{render_field(form_ticket.end_time_sale,class="form-control",type="time",value=tic.end_time_sale)}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="row ">
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Mínima
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.min_quantity,class="form-control",onkeypress="validate(event)",value=tic.min_quantity,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Maxima
                                                                    disponivel</label>
                                                                {{render_field(form_ticket.max_quantity,class="form-control",onkeypress="validate(event)",value=tic.max_quantity,min='0')}}
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-4">
                                                            <div class="form-group">
                                                                <label class="h6 text-dark"
                                                                    for="exampleInputDate1">Descrição do
                                                                    ingresso</label>
                                                                {{render_field(form_ticket.description,class="form-control",default=tic.description)}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="submit" onmousedown="post_edit_doacao({{tic.id}})"
                                                    class="btn btn-sm btn-secondary">Alterar
                                                    ingresso</button>
                                                <button id="cancel" type="button"
                                                    class="btn btn-link text-danger ml-auto"
                                                    data-dismiss="modal">Cancelar</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
                {% endif%}
            </div>
        </div>
        <div class="card card-body bg-white border-light mb-4 align-center  shadow">
            <h2 class="h5 mb-4 text-dark">7. Responsabilidades</h2>
            <div class="form-group">
                <div class="col-md-12 mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="flexCheckChecked">
                        <label class="form-check-label" for="flexCheckChecked">Ao publicar este evento, estou de acordo
                            com os Termos de uso, com as Diretrizes de Comunidade e com o Acordo de Processamento de
                            Dados, bem como declaro estar ciente da Política de Privacidade, da Política de Cookies e
                            das Obrigatoriedades Legais.</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modal-pagos" tabindex="-1" role="dialog" aria-labelledby="modal-pagos"
            aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h6 class="modal-title text-dark">Criar ingresso pago</h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="form-pagos" method="POST">
                        {{ form_ticket.csrf_token }}
                        <div class="modal-body">
                            <div class="form-group">
                                <input type="text" name="type" value="pagos" hidden>
                                <div class="row mb-4 mb-lg-5">
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Nome do ingresso</label>
                                            {{render_field(form_ticket.name,class="form-control")}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Quantidade
                                                disponivel</label>
                                            {{render_field(form_ticket.amount,class="form-control",onkeypress="validate(event)",id="price_qtd",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-8 col-md-3">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Preço</label>
                                            {{render_field(form_ticket.price,class="form-control",type="number",onkeypress="validate(event)",id="price_ticket",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-4 col-md-1">
                                        <div class="form-group">
                                            <p class="h6 text-dark" for="exampleInputDate1">
                                                Preço Total</p>
                                            <label class="tot_price text-success">R$ 0,00</label>
                                            <input type="text" name="total" id="total_input" hidden>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row ">
                                    <div class="col-12 col-md-8 ">
                                        <div class="input-daterange datepicker row align-items-center">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="h6 text-dark" for="exampleInputDate1">Data
                                                        de inicio das vendas</label>
                                                    <div class="input-group mb-4">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <span class="far fa-calendar-alt"></span>
                                                            </span>
                                                        </div>
                                                        {{render_field(form_ticket.start_date_sale,class="form-control
                                                        datepicker",id="exampleInputDate1")}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="h6 text-dark" for="exampleInputDate1">Data
                                                        de Término das vendas</label>
                                                    <div class="input-group mb-4">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <span class="far fa-calendar-alt"></span>
                                                            </span>
                                                        </div>
                                                        {{render_field(form_ticket.end_date_sale,class="form-control
                                                        datepicker",id="exampleInputDate2")}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-4">
                                        <div class="form-group ">
                                            <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                de inicio</label>
                                            <div class="input-group mb-4">
                                                {{render_field(form_ticket.start_time_sale,class="form-control",type="time")}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-4">
                                        <div class="form-group ">
                                            <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                de Término</label>
                                            <div class="input-group mb-4">
                                                {{render_field(form_ticket.end_time_sale,class="form-control",type="time")}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row ">
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Mínima
                                                disponivel</label>
                                            {{render_field(form_ticket.min_quantity,class="form-control",type="number",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Maxima
                                                disponivel</label>
                                            {{render_field(form_ticket.max_quantity,class="form-control",type="number",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Descrição do
                                                ingresso</label>
                                            {{render_field(form_ticket.description,class="form-control")}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input type="submit" class="btn btn-sm btn-secondary">Criar
                            ingresso</input>
                            <button type="button" class="btn btn-link text-danger ml-auto"
                                data-dismiss="modal">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modal-gratis" tabindex="-1" role="dialog" aria-labelledby="modal-gratis"
            aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h6 class="modal-title text-dark">Criar ingresso gratis</h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="form-gratis" method="POST">
                        {{ form_ticket.csrf_token }}
                        <div class="modal-body">
                            <div class="form-group">
                                <div class="row mb-4 mb-lg-5">
                                    <input type="text" name="type" value="gratis" hidden>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Nome
                                                do ingresso</label>
                                            {{render_field(form_ticket.name,class="form-control")}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Quantidade
                                                disponivel</label>
                                            {{render_field(form_ticket.amount,class="form-control",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>

                                    <div class="col-4 col-md-1">
                                        <div class="form-group">
                                            <p class="h6 text-dark" for="exampleInputDate1">Preço
                                            </p>
                                            <label class="text-success" for="">Gratis</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row ">
                                    <div class="col-12 col-md-8 ">
                                        <div class="input-daterange datepicker row align-items-center">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="h6 text-dark" for="exampleInputDate1">Data
                                                        de inicio das vendas</label>
                                                    <div class="input-group mb-4">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <span class="far fa-calendar-alt"></span>
                                                            </span>
                                                        </div>
                                                        {{render_field(form_ticket.start_date_sale,class="form-control
                                                        datepicker",id="exampleInputDate1")}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="h6 text-dark" for="exampleInputDate1">Data
                                                        de Término das vendas</label>
                                                    <div class="input-group mb-4">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <span class="far fa-calendar-alt"></span>
                                                            </span>
                                                        </div>
                                                        {{render_field(form_ticket.end_date_sale,class="form-control
                                                        datepicker",id="exampleInputDate2")}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-4">
                                        <div class="form-group ">
                                            <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                de inicio</label>
                                            <div class="input-group mb-4">
                                                {{render_field(form_ticket.start_time_sale,class="form-control",type="time")}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-4">
                                        <div class="form-group ">
                                            <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                de Término</label>
                                            <div class="input-group mb-4">
                                                {{render_field(form_ticket.end_time_sale,class="form-control",type="time")}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row ">
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Mínima
                                                disponivel</label>
                                            {{render_field(form_ticket.min_quantity,class="form-control",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Maxima
                                                disponivel</label>
                                            {{render_field(form_ticket.max_quantity,class="form-control",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Descrição do
                                                ingresso</label>
                                            {{render_field(form_ticket.description,class="form-control")}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-sm btn-secondary">Criar
                                ingresso</button>
                            <button type="button" class="btn btn-link text-danger ml-auto"
                                data-dismiss="modal">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modal-doacao" tabindex="-1" role="dialog" aria-labelledby="modal-doacao"
            aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h6 class="modal-title text-dark">Criar ingresso de doação</h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form method="POST" id="form-doacao">
                        {{ form_ticket.csrf_token }}
                        <input type="text" name="type" value="doação" hidden>
                        <div class="modal-body">
                            <div class="form-group">
                                <div class="row mb-4 mb-lg-5">
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Nome
                                                do ingresso</label>
                                            {{render_field(form_ticket.name,class="form-control")}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Quantidade
                                                disponivel</label>
                                            {{render_field(form_ticket.amount,class="form-control",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark">Adicione o item da doação</label>
                                            <select name="donation" class="custom-select"
                                                id="inlineFormCustomSelectPref">
                                                <option selected="selected">Choose...</option>
                                                {% for donat in donation %}
                                                <option value="{{donat.id}}">{{donat.name}}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row ">
                                    <div class="col-12 col-md-8 ">
                                        <div class="input-daterange datepicker row align-items-center">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="h6 text-dark" for="exampleInputDate1">Data
                                                        de inicio das vendas</label>
                                                    <div class="input-group mb-4">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <span class="far fa-calendar-alt"></span>
                                                            </span>
                                                        </div>
                                                        {{render_field(form_ticket.start_date_sale,class="form-control
                                                        datepicker",id="exampleInputDate1")}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label class="h6 text-dark" for="exampleInputDate1">Data
                                                        de Término das vendas</label>
                                                    <div class="input-group mb-4">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text">
                                                                <span class="far fa-calendar-alt"></span>
                                                            </span>
                                                        </div>
                                                        {{render_field(form_ticket.end_date_sale,class="form-control
                                                        datepicker",id="exampleInputDate2")}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-4">
                                        <div class="form-group ">
                                            <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                de inicio</label>
                                            <div class="input-group mb-4">
                                                {{render_field(form_ticket.start_time_sale,class="form-control",type="time")}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-2 col-sm-4">
                                        <div class="form-group ">
                                            <label class="h6 text-dark" for="exampleInputDate1">Hora
                                                de Término</label>
                                            <div class="input-group mb-4">
                                                {{render_field(form_ticket.end_time_sale,class="form-control",type="time")}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row ">
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Mínima
                                                disponivel</label>
                                            {{render_field(form_ticket.min_quantity,class="form-control",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Maxima
                                                disponivel</label>
                                            {{render_field(form_ticket.max_quantity,class="form-control",onkeypress="validate(event)",min='0')}}
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-4">
                                        <div class="form-group">
                                            <label class="h6 text-dark" for="exampleInputDate1">Descrição do
                                                ingresso</label>
                                            {{render_field(form_ticket.description,class="form-control")}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-sm btn-secondary">Criar
                                ingresso</button>
                            <button id="cancel" type="button" class="btn btn-link text-danger ml-auto"
                                data-dismiss="modal">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="float-left">
            <button type="button" id="button_main" class="btn btn-link btn-secondary">Criar Evento</button>
            <a href="{{url_for('home')}}" type="button" class="btn btn-link btn-danger" data-dismiss="modal">Cancelar</a>
        </div>
    </div>
</section>
<div class="alert ">
    <span class="fas fa-exclamation-circle text-white"></span>
    <span class="msg text-white"></span>
    <span class="close-btn">
        <span class="fas fa-times text-white"></span>
    </span>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script type="text/javascript">
    $(document).on('submit', '#form-pagos', function (e) {
        form = $('#form-pagos').serialize()
        console.log('hello');
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{{url_for('create_ticket')}}',
            data: form
        })
        $("#cancel").trigger("click");
        window.location.reload()
    });

    $(document).on('submit', '#form-gratis', function (e) {
        form = $('#form-gratis').serialize()
        console.log('hello');
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{{url_for('create_ticket')}}',
            data: form
        })
        $("#cancel").trigger("click");
        window.location.reload()
    });

    $(document).on('submit', '#form-doacao', function (e) {
        form = $('#form-doacao').serialize()
        console.log('hello');
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{{url_for('create_ticket')}}',
            data: form,
        })
        $("#cancel").trigger("click");
        window.location.reload()
    });


    function post_edit(id) {
        $(document).on('submit', '#edit-form-pagos' + id, function (e) {
            form = $('#edit-form-pagos' + id).serialize()
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/alterTicket/' + id,
                data: form,
                async: true,
                error: function (request, error) {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-danger")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Não foi possivel salvar o ingresso! ' + error);
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                    }, 4000);
                },
                success: function () {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-success")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Ingresso alterado corretamente');
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                        window.location.reload()
                    }, 3000);
                }
            })
            $(".close").trigger("click");
        });
    }

    function post_edit_gatis(id) {
        $(document).on('submit', '#edit-form-gatis' + id, function (e) {
            form = $('#edit-form-gatis' + id).serialize()
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/alterTicket/' + id,
                data: form,
                async: true,
                error: function (request, error) {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-danger")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Não foi possivel salvar o ingresso! ' + error);
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                    }, 4000);
                },
                success: function () {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-success")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Ingresso alterado corretamente');
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                        window.location.reload()
                    }, 3000);
                }
            })
            $(".close").trigger("click");
        });
    }

    function post_edit_doacao(id) {
        $(document).on('submit', '#edit-form-doacao' + id, function (e) {
            form = $('#edit-form-doacao' + id).serialize()
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/alterTicket/' + id,
                data: form,
                async: true,
                error: function (request, error) {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-danger")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Não foi possivel salvar o ingresso! ' + error);
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                    }, 4000);
                },
                success: function () {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-success")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Ingresso alterado corretamente');
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                        window.location.reload()
                    }, 3000);
                }
            })
            $(".close").trigger("click");
        });
    }

    function delete_ticket(id) {
        $(document).on('submit', '#delete_ticket' + id, function (e) {
            form = $('#delete_ticket' + id).serialize()
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '/deletTicket/' + id,
                data: form,
                async: true,
                error: function (request, error) {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-danger")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Não foi possivel excluir o ingresso! ' + error);
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                    }, 4000);
                },
                success: function () {
                    $('.alert').removeClass("hide")
                    $('.alert').addClass("alert-success")
                    $('.alert').addClass("show")
                    $('.alert').addClass("showAlert")
                    $('.msg').text('Ingresso excluido corretamente');
                    setTimeout(function () {
                        $('.alert').addClass("hide")
                        $('.alert').removeClass("show")
                        $('.alert').removeClass("showAlert")
                        window.location.reload()
                    }, 3000);
                }
            })
            $(".close").trigger("click");
        });
    }


    $("#button_main").click(function (event) {
        $("#submit_button").trigger("click");                
    });

    $(document).on('submit', '#form_main', function (e) {
        form = $('#form_main').serialize()

        var inputElements = document.getElementsByClassName('form-check-input');
        var checkedValue = -1;
        for(var i=0; inputElements[i]; ++i){
            if(inputElements[i].checked){
                 checkedValue = checkedValue + ',' + inputElements[i].value;
            }
        }
        if(checkedValue == -1)
            checkedValue = ''
            
        console.log(checkedValue);

        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '/post_event/'+checkedValue,
            data: form,
            async: true,
            error: function (request, error) {
                $('.alert').removeClass("hide")
                $('.alert').addClass("alert-danger")
                $('.alert').addClass("show")
                $('.alert').addClass("showAlert")
                $('.msg').text('Não foi possivel excluir o ingresso! ' + error);
                setTimeout(function () {
                    $('.alert').addClass("hide")
                    $('.alert').removeClass("show")
                    $('.alert').removeClass("showAlert")
                }, 4000);
            },
            success: function () {
                $('.alert').removeClass("hide")
                $('.alert').addClass("alert-success")
                $('.alert').addClass("show")
                $('.alert').addClass("showAlert")
                $('.msg').text('Ingresso excluido corretamente');
                setTimeout(function () {
                    $('.alert').addClass("hide")
                    $('.alert').removeClass("show")
                    $('.alert').removeClass("showAlert")
                    window.location.reload()
                }, 3000);
            }
        })
    });


    $('.close-btn').click(function () {
        $('.alert').addClass("hide")
        $('.alert').removeClass("show")
        $('.alert').removeClass("showAlert")
    });

    $(".datepicker").datepicker({
        format: 'dd/mm/yyyy'
    });

    $("#price_ticket").change(function () {
        var qtd = $('#price_qtd').val();
        var price = $('#price_ticket').val();

        var tote = qtd * price;
        $('.tot_price').text('R$ ' + tote.toLocaleString());
        $('#total_input').val(tote)

    });
    $("#price_qtd").change(function () {
        var qtd = $('#price_qtd').val();
        var price = $('#price_ticket').val();

        var tote = qtd * price;
        $('.tot_price').text('R$ ' + tote.toLocaleString());
        $('#total_input').val(tote)
    });


    function validate(evt) {
        var theEvent = evt || window.event;

        // Handle paste
        if (theEvent.type === 'paste') {
            key = event.clipboardData.getData('text/plain');
        } else {
            // Handle key press
            var key = theEvent.keyCode || theEvent.which;
            key = String.fromCharCode(key);
        }
        var regex = /[0-9]|\./;
        if (!regex.test(key)) {
            theEvent.returnValue = false;
            if (theEvent.preventDefault) theEvent.preventDefault();
        }
    }

</script>

<script>
    $(document).ready(function () {
        $(document).on('change', '.btn-file :file', function () {
            var input = $(this),
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect', [label]);
        });

        $('.btn-file :file').on('fileselect', function (event, label) {

            var input = $(this).parents('.input-group').find(':text'),
                log = label;

            if (input.length) {
                input.val(log);
            } else {
                if (log) alert(log);
            }

        });
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#img-upload').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#imgInp").change(function () {
            readURL(this);
        });
    });
</script>

<script src="https://cdn.tiny.cloud/1/6yvyozygg61enokl0yipe02rsxftvh9s0aez2qibfmxgollg/tinymce/5/tinymce.min.js"
    referrerpolicy="origin"></script>

<script>
    tinymce.init({
        selector: 'textarea#editor',
        menubar: false
    });
</script>

{% endblock javascripts %}